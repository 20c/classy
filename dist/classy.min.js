(function(){classy={make_name:function(a){var b=a.split(/[-\s]/);for(a=0;a<b.length;a++)0<a&&(b[a]=b[a].charAt(0).toUpperCase()+b[a].slice(1));return b.join("")},define:function(a,b){var d;a=classy.make_name(a);if("function"==typeof b[a]){var c=b[a];delete b[a]}else c=function(){};for(d in b)c.prototype[d]=b[d];c.prototype._meta={name:a};return c},fork:function(a,b,d){var c,e,g;a=classy.make_name(a);"function"==typeof d&&(d=[d]);if("function"==typeof b[a]){var f=b[a];delete b[a]}else f=1==d.length?
function(){d[0].apply(this,arguments)}:function(){};for(e in d)if(g=d[e]){for(c in g.prototype)f.prototype[c]=g.prototype[c];for(c in b)"function"==typeof f.prototype[c]&&(f.prototype[g.prototype._meta.name+"_"+c]=g.prototype[c]),f.prototype[c]=b[c];f.prototype[g.prototype._meta.name]=g}f.prototype._meta={name:a,parents:d};return f},override:function(a,b,d){a.prototype[b]&&(a.prototype[a.prototype._meta.name+"_"+b]=a.prototype[b]);a.prototype[b]=d},util:{concat_array:function(){var a=[],b,d,c;for(c=
0;c<arguments.length;c++)if(b=arguments[c],void 0!==b)if("object"==typeof b&&b.length)for(d=0;d<b.length;d++)a.push(b[d]);else a.push(b);return a}},define_or_fork:function(a,b,d){return a&&b?d?classy.fork(a,b,d):classy.define(a,b):function(){}},space:function(a,b,d,c){rv={$meta:{cls:classy.define_or_fork(a,b,c),space:d,name:a,definition:b},$init:function(){function a(b,c){return b.apply(this,c)}a.prototype=this.$meta.cls.prototype;return new a(this.$meta.cls,arguments)},$define:function(a,b,c){if("object"==
typeof c&&c.length){var d;for(d=0;d<c.length;d++)c[d]=c[d]&&c[d].$meta?c[d].$meta.cls:c[d]}else c&&c.$meta&&(c=[c.$meta.cls]);this[a]=classy.space(a,b,this,c)},$fork:function(a,b,c,d){(d||this.$meta.space).$define(a,b,classy.util.concat_array(this,c))},$extend:function(a){for(var b in a)classy.override(this.$meta.cls,b,a[b])}};var e;a=rv.$meta.cls;if(c)for(e in c)"$"==e.charAt(0)&&(rv[e]=c[e]);for(e in b)"$"==e.charAt(0)&&(rv[e]&&c&&(rv[c.prototype._meta.name+"_"+e]=c[e]),rv[e]=b[e],a&&(a.prototype[e]=
a.prototype[e].bind(rv)));a&&a.prototype._meta&&(a.prototype._meta.classy=rv);return rv}}})();
