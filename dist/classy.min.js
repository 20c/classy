(function(){classy={make_name:function(a){var c=a.split(/[-\s]/);for(a=0;a<c.length;a++)0<a&&(c[a]=c[a].charAt(0).toUpperCase()+c[a].slice(1));return c.join("")},define:function(a,c){var b;a=classy.make_name(a);if("function"==typeof c[a]){var e=c[a];delete c[a]}else e=function(){};for(b in c)e.prototype[b]=c[b];e.prototype._meta={name:a};return e},fork:function(a,c,b){var e,g,d;a=classy.make_name(a);"function"==typeof b&&(b=[b]);if("function"==typeof c[a]){var f=c[a];delete c[a]}else f=1==b.length?
function(){b[0].apply(this,arguments)}:function(){};for(g in b)if(d=b[g]){for(e in d.prototype)f.prototype[e]=d.prototype[e];for(e in c)"function"==typeof f.prototype[e]&&(f.prototype[d.prototype._meta.name+"_"+e]=d.prototype[e]),f.prototype[e]=c[e];f.prototype[d.prototype._meta.name]=d}f.prototype._meta={name:a,parents:b};return f},override:function(a,c,b){a.prototype[c]&&(a.prototype[a.prototype._meta.name+"_"+c]=a.prototype[c]);a.prototype[c]=b},util:{concat_array:function(){var a=[],c,b,e;for(e=
0;e<arguments.length;e++)if(c=arguments[e],void 0!==c)if("object"==typeof c&&c.length)for(b=0;b<c.length;b++)a.push(c[b]);else a.push(c);return a}},define_or_fork:function(a,c,b){return a&&c?b?classy.fork(a,c,b):classy.define(a,c):function(){}},space:function(a,c,b,e,g){rv={$meta:{cls:classy.define_or_fork(a,c,e),space:b,name:a,definition:c},$init:function(){function a(c,b){return c.apply(this,b)}a.prototype=this.$meta.cls.prototype;return new a(this.$meta.cls,arguments)},$define:function(a,c,b){var e=
[];if("object"==typeof b&&b.length){var d;for(d=0;d<b.length;d++)b[d]&&b[d].$meta&&e.push(b[d]),b[d]=b[d]&&b[d].$meta?b[d].$meta.cls:b[d]}else b&&b.$meta&&(e.push(b),b=[b.$meta.cls]);this[a]=classy.space(a,c,this,b,e)},$fork:function(a,b,c,d){(d||this.$meta.space).$define(a,b,classy.util.concat_array(this,c))},$extend:function(a){for(var b in a)classy.override(this.$meta.cls,b,a[b])}};var d,f;a=rv.$meta.cls;if(g&&0<g.length)for(d in g)for(f in g[d])"$"==f.charAt(0)&&"$meta"!=f&&"$define"!=f&&"$fork"!=
f&&"$extend"!=f&&"$init"!=f&&(rv.$meta.cls.prototype[f]="function"==typeof g[d][f]?rv[f]=g[d][f].bind(rv):rv[f]=g[d][f]);for(d in c)"$"==d.charAt(0)&&(rv[d]&&e&&(rv[e.prototype._meta.name+"_"+d]=e[d]),rv[d]=c[d],a&&a.prototype[d].bind&&(a.prototype[d]=a.prototype[d].bind(rv)));a&&a.prototype._meta&&(a.prototype._meta.classy=rv);return rv}}})();
